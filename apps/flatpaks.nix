{ config, pkgs, lib, ... }:
{
  services.flatpak.enable = true;
  services.flatpak.packages = [
    # Browsers
    "app.zen_browser.zen"

    # Communication
    "dev.vencord.Vesktop"
    "com.slack.Slack"

    # Productivity
    "com.getpostman.Postman"
    "com.obsproject.Studio"
    "org.onlyoffice.desktopeditors"
    "org.gimp.GIMP"
    "io.gitlab.adhami3310.Impression"
    "org.gnome.Todo"
    "io.github.qwersyk.Newelle"
    "io.github.Foldex.AdwSteamGtk"

    # Gaming
    "org.vinegarhq.Sober"
    "com.usebottles.bottles"
    "io.mrarm.mcpelauncher"
    "com.mojang.Minecraft"
    "com.pokemmo.PokeMMO"
    "com.atlauncher.ATLauncher"
    "com.github.appadeia.Taigo"


    # Media
    "io.github.mhogomchungu.media-downloader"

    # Utilities
    "org.kde.filelight"
    "com.github.tchx84.Flatseal"
    "io.github.giantpinkrobots.flatsweep"
    "io.github.realmazharhussain.GdmSettings"
    "org.gnome.Extensions"
    "io.github.pwr_solaar.solaar"
    "org.x.Warpinator"

    # Video Conferencing
    "us.zoom.Zoom"
  ];
  services.flatpak.overrides = {
    "io.github.qwersyk.Newelle" = {
      Context.filesystems = [ "home" ];
      "Session Bus Policy"."org.freedesktop.Flatpak" = "talk";
    };
  };
  services.flatpak.uninstallUnmanaged = true;  # Removes undeclared apps on rebuild
}
